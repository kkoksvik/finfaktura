## Hvordan utvikle finfaktura
## $Id$
## Håvard Dahle <havard@dahle.no> (C) 2006-2007


### Lage ny release ###

* Dytte på versjonsnummeret i finfaktura/__init__.py => $VERSJON
    export VERSJON=$(./faktura.py -v); echo $VERSJON;

* Oppgradere debian changelog
    dch --newversion $VERSJON
    -> skrive inn hva som har skjedd siden $VERSJON-1

* Laste ned svn-logg
    svn2cl.sh # finnes på http://ch.tudelft.nl/~arthur/svn2cl/downloads.html

* Commite endringer til svn
    svn commit finfaktura/__init__.py debian/changelog -m "Gjør $VERSJON klar til utgivelse"

* Kopiere til ny grein:
    svn copy https://finfaktura.googlecode.com/svn/trunk https://finfaktura.googlecode.com/svn/branches/$VERSJON -m "Kopierer $VERSJON til egen gren"
    
* Sjekke ut den nye greina, og begynne å jobbe på den
    cd /tmp
    svn co https://finfaktura.googlecode.com/svn/branches/$VERSJON
    cd $VERSJON
    
* Endre på PRODUKSJONSVERDI-variabelen (til True) i finfaktura/fakturabibliotek.py

* Prøvestarte programmet og se at alt ser greit ut
    FAKTURADB=faktura.testdb ./faktura.py

* Lage .deb
    fakeroot debian/rules binary

* Committe endringer til svn dersom .deb gikk smertefritt
    svn commit -m "pakker og klargjør $VERSJON til produksjon"

* Tagge versjonen dersom .deb gikk smertefritt
    svn copy https://finfaktura.googlecode.com/svn/branches/$VERSJON https://finfaktura.googlecode.com/svn/tags/versjon-$VERSJON -m "Tagger ferdigstilt $VERSJON for ettertiden"

* Lage skjermdump
    doc/skjermdump.sh
    -> navngi etter .deb-dir: finfaktura-$DEBVERSJON.deb-dir
    
    
* Kopier til http://code.google.com/p/finfaktura/downloads/entry
    #http://support.googlecode.com/svn/trunk/scripts/googlecode-upload.py
    
    cd /tmp
    
    -> .deb 
    googlecode-upload.py -s "Fryktelig fin faktura (debian/ubuntu), versjon $VERSJON" -p finfaktura -u havard.dahle -l "Featured,Type-Package,OpSys-Linux" finfaktura_${VERSJON}_i386.deb
    
    -> .rpm
    fakeroot alien --to-rpm finfaktura_${VERSJON}_i386.deb
    
    googlecode-upload.py -s "Fryktelig fin faktura (fedora/suse), versjon $VERSJON" -p finfaktura -u havard.dahle -l "Featured,Type-Package,OpSys-Linux" finfaktura-${VERSJON}-*.rpm
    
    
    -> skjermdump
    
* Hurra!

